<?xml version="1.0" encoding="UTF-8"?>
#set ($totalRecCount = 0)
$helper.startStopWatch()
#if($handlerLimit) $helper.print("HandlerLimit:") $helper.print($handlerLimit)
## this query lets us limit the results for test - DB2 specific syntax
#set($handlerQuery = "SELECT EPA_HDLR_ID FROM RCRA_CME_FAC_SUBM fetch first $handlerLimit rows only")
#else
#set($handlerQuery = "SELECT EPA_HDLR_ID FROM RCRA_CME_FAC_SUBM ")
#end
$helper.print("handlerQuery: $handlerQuery")
#if($makeHeader)#if($makeHeader.equalsIgnoreCase("true"))## || $makeHeader == "TRUE")
<hdr:Document xmlns:hdr="http://www.exchangenetwork.net/schema/v1.0/ExchangeNetworkDocument.xsd" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xsi:schemaLocation="http://www.exchangenetwork.net/schema/v1.0/ExchangeNetworkDocument.xsd http://www.exchangenetwork.net/schema/v1.0/ExchangeNetworkDocument.xsd"
    Id="$docId">
    <hdr:Header>
        <hdr:Author>$author</hdr:Author>
        <hdr:Organization>$providingOrg</hdr:Organization>
        <hdr:Title>$title</hdr:Title>
        <hdr:CreationTime>$helper.getCurrentDateTime()</hdr:CreationTime>
        <hdr:Comment>RCRA submission</hdr:Comment>
        <hdr:DataService>CMESubmission</hdr:DataService>
        <hdr:ContactInfo>$contactInfo</hdr:ContactInfo>
        <hdr:Notification>$notification</hdr:Notification>
        <hdr:Sensitivity>Unclassified</hdr:Sensitivity>
        <hdr:Property>
            <hdr:name>RCRAInfoUserID</hdr:name>
            <hdr:value>$rcraInfoUserId</hdr:value>
        </hdr:Property>
        <hdr:Property>
            <hdr:name>RCRAInfoStateCode</hdr:name>
            <hdr:value>$rcraInfoStateCode</hdr:value>
        </hdr:Property>
    </hdr:Header>
<hdr:Payload Operation="$payloadOperation">
#end#end##if($makeHeader)
<CME:HazardousWasteCMESubmission xmlns:CME="http://www.exchangenetwork.net/schema/RCRA/4/0/RCRA_HazardousWasteCMESubmission_v4.0.xsd" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xsi:schemaLocation="http://www.exchangenetwork.net/schema/RCRA/4 http://www.exchangenetwork.net/schema/RCRA/4/0/RCRA_HazardousWasteCMESubmission_v4.0.xsd">
<CME:CMEFacilitySubmission>
#foreach($handlerId in $helper.getList($handlerQuery, "epa_hdlr_id"))
#if ($velocityCount % 500 == 0)
$helper.print($velocityCount)
$helper.printElapsedTime()
#end
#set ($totalRecCount = $velocityCount)
#set ($handler = $helper.getObject("SELECT * FROM RCRA_CME_FAC_SUBM WHERE EPA_HDLR_ID = ? ", $handlerId) )
      
#if($handler.get("epa_hdlr_id"))
    <CME:EPAHandlerID>$handler.get("epa_hdlr_id")</CME:EPAHandlerID>
#end        
#foreach($enf in $helper.getData("SELECT * FROM RCRA_CME_FAC_SUBM fs JOIN RCRA_CME_ENFRC_ACT e ON fs.CME_FAC_SUBM_ID = e.CME_FAC_SUBM_ID WHERE EPA_HDLR_ID = ? ", $handlerId) )
#if(($enf.get("enfrc_agn_loc_name"))||($enf.get("enfrc_act_iden"))||($enf.get("enfrc_act_date"))||($enf.get("enfrc_agn_name")))
    <CME:EnforcementAction>
#if($enf.get("trans_code"))
        <CME:TransactionCode>$enf.get("trans_code")</CME:TransactionCode>
#end
#if($enf.get("enfrc_agn_loc_name"))
        <CME:EnforcementAgencyLocationName>$enf.get("enfrc_agn_loc_name")</CME:EnforcementAgencyLocationName>
#end
#if($enf.get("enfrc_act_iden"))
        <CME:EnforcementActionIdentifier>$enf.get("enfrc_act_iden")</CME:EnforcementActionIdentifier>
#end
#if($enf.get("enfrc_act_date"))
        <CME:EnforcementActionDate>$enf.get("enfrc_act_date")</CME:EnforcementActionDate>
#end
#if($enf.get("enfrc_agn_name"))
        <CME:EnforcementAgencyName>$enf.get("enfrc_agn_name")</CME:EnforcementAgencyName>
#end
#if($enf.get("enfrc_docket_num"))
        <CME:EnforcementDocketNumber>$enf.get("enfrc_docket_num")</CME:EnforcementDocketNumber>
#end
#if($enf.get("enfrc_attry"))
        <CME:EnforcementAttorney>$enf.get("enfrc_attry")</CME:EnforcementAttorney>
#end
#if($enf.get("corct_act_compt"))
        <CME:CorrectiveActionComponent>$enf.get("corct_act_compt")</CME:CorrectiveActionComponent>
#end
#if($enf.get("cnst_agmt_final_order_seq_num"))
        <CME:ConsentAgreementFinalOrderSequenceNumber>$enf.get("cnst_agmt_final_order_seq_num")</CME:ConsentAgreementFinalOrderSequenceNumber>
#end
#if($enf.get("appeal_init_date"))
        <CME:AppealInitiateDate>$enf.get("appeal_init_date")</CME:AppealInitiateDate>
#end
#if($enf.get("appeal_rsln_date"))
        <CME:AppealResolutionDate>$enf.get("appeal_rsln_date")</CME:AppealResolutionDate>
#end
#if($enf.get("disp_stat_date"))
        <CME:DispositionStatusDate>$enf.get("disp_stat_date")</CME:DispositionStatusDate>
#end
#if($enf.get("disp_stat_owner"))
        <CME:DispositionStatusOwner>$enf.get("disp_stat_owner")</CME:DispositionStatusOwner>
#end
#if($enf.get("disp_stat"))
        <CME:DispositionStatus>$enf.get("disp_stat")</CME:DispositionStatus>
#end
#if($enf.get("enfrc_owner"))
        <CME:EnforcementOwner>$enf.get("enfrc_owner")</CME:EnforcementOwner>
#end
#if($enf.get("enfrc_type"))
        <CME:EnforcementType>$enf.get("enfrc_type")</CME:EnforcementType>
#end
#if($enf.get("enfrc_resp_person_owner"))
        <CME:EnforcementResponsiblePersonOwner>$enf.get("enfrc_resp_person_owner")</CME:EnforcementResponsiblePersonOwner>
#end
#if($enf.get("enfrc_resp_person_iden"))
        <CME:EnforcementResponsiblePersonIdentifier>$enf.get("enfrc_resp_person_iden")</CME:EnforcementResponsiblePersonIdentifier>
#end
#if($enf.get("enfrc_resp_suborg_owner"))
        <CME:EnforcementResponsibleSuborganizationOwner>$enf.get("enfrc_resp_suborg_owner")</CME:EnforcementResponsibleSuborganizationOwner>
#end
#if($enf.get("enfrc_resp_suborg"))
        <CME:EnforcementResponsibleSuborganization>$enf.get("enfrc_resp_suborg")</CME:EnforcementResponsibleSuborganization>
#end
#if($enf.get("notes"))
        <CME:Notes>$enf.get("notes")</CME:Notes>
#end        
#foreach($penalty in $helper.getData("SELECT * FROM RCRA_CME_FAC_SUBM fs JOIN RCRA_CME_ENFRC_ACT e ON fs.CME_FAC_SUBM_ID = e.CME_FAC_SUBM_ID JOIN RCRA_CME_PNLTY p ON e.ENFRC_ACT_ID = p.ENFRC_ACT_ID WHERE EPA_HDLR_ID = ? ", $handlerId))
#if(($penalty.get("pnlty_type"))||($penalty.get("pnlty_type_owner")))
            <CME:Penalty>
#if($penalty.get("trans_code"))
                <CME:TransactionCode>$penalty.get("trans_code")</CME:TransactionCode>
#end
#if($penalty.get("pnlty_type_owner"))
                <CME:PenaltyTypeOwner>$penalty.get("pnlty_type_owner")</CME:PenaltyTypeOwner>
#end
#if($penalty.get("pnlty_type"))
                <CME:PenaltyType>$penalty.get("pnlty_type")</CME:PenaltyType>
#end
#if($penalty.get("cash_civil_pnlty_sought_amount"))
                <CME:CashCivilPenaltySoughtAmount>$penalty.get("cash_civil_pnlty_sought_amount")</CME:CashCivilPenaltySoughtAmount>
#end
#if($penalty.get("notes"))
                <CME:Notes>$penalty.get("notes")</CME:Notes>
#end
#foreach($payment in $helper.getData("SELECT * FROM RCRA_CME_FAC_SUBM fs JOIN RCRA_CME_ENFRC_ACT e ON fs.CME_FAC_SUBM_ID = e.CME_FAC_SUBM_ID JOIN RCRA_CME_PNLTY p ON e.ENFRC_ACT_ID = p.ENFRC_ACT_ID JOIN RCRA_CME_PYMT cp ON p.PNLTY_ID = cp.PNLTY_ID WHERE EPA_HDLR_ID = ? ", $handlerId))
#if(($payment.get("pymt_seq_num")))
                    <CME:Payment>
#if($payment.get("trans_code"))
                        <CME:TransactionCode>$payment.get("trans_code")</CME:TransactionCode>
#end
#if($payment.get("pymt_seq_num"))
                        <CME:PaymentSequenceNumber>$payment.get("pymt_seq_num")</CME:PaymentSequenceNumber>
#end
#if($payment.get("pymt_dflt_date"))
                        <CME:PaymentDefaultedDate>$payment.get("pymt_dflt_date")</CME:PaymentDefaultedDate>
#end
#if($payment.get("schd_pymt_date"))
                        <CME:ScheduledPaymentDate>$payment.get("schd_pymt_date")</CME:ScheduledPaymentDate>
#end
#if($payment.get("schd_pymt_amount"))
                        <CME:ScheduledPaymentAmount>$payment.get("schd_pymt_amount")</CME:ScheduledPaymentAmount>
#end
#if($payment.get("actl_pymt_date"))
                        <CME:ActualPaymentDate>$payment.get("actl_pymt_date")</CME:ActualPaymentDate>
#end
#if($payment.get("actl_paid_amount"))
                        <CME:ActualPaidAmount>$payment.get("actl_paid_amount")</CME:ActualPaidAmount>
#end
#if($payment.get("notes"))
                        <CME:Notes>$payment.get("notes")</CME:Notes>
#end
                    </CME:Payment>
#end
#end
            </CME:Penalty>
#end
#end
#foreach($violenf in $helper.getData("SELECT * FROM RCRA_CME_FAC_SUBM fs JOIN RCRA_CME_ENFRC_ACT e ON fs.CME_FAC_SUBM_ID = e.CME_FAC_SUBM_ID JOIN RCRA_CME_VIOL_ENFRC ve ON e.ENFRC_ACT_ID = ve.ENFRC_ACT_ID WHERE EPA_HDLR_ID = ? ", $handlerId))
#if(($violenf.get("viol_seq_num"))||($violenf.get("agn_which_dtrm_viol")))
            <CME:ViolationEnforcement>
#if($violenf.get("trans_code"))
                <CME:TransactionCode>$violenf.get("trans_code")</CME:TransactionCode>
#end
#if($violenf.get("viol_seq_num"))
                <CME:ViolationSequenceNumber>$violenf.get("viol_seq_num")</CME:ViolationSequenceNumber>
#end
#if($violenf.get("agn_which_dtrm_viol"))
                <CME:AgencyWhichDeterminedViolation>$violenf.get("agn_which_dtrm_viol")</CME:AgencyWhichDeterminedViolation>
#end
#if($violenf.get("rtn_compl_schd_date"))
                <CME:ReturnComplianceScheduledDate>$violenf.get("rtn_compl_schd_date")</CME:ReturnComplianceScheduledDate>
#end
            </CME:ViolationEnforcement>
#end
#end
#foreach($sep in $helper.getData("SELECT * FROM RCRA_CME_FAC_SUBM fs JOIN RCRA_CME_ENFRC_ACT e ON fs.CME_FAC_SUBM_ID = e.CME_FAC_SUBM_ID JOIN RCRA_CME_SUPP_ENVR_PRJT s ON e.ENFRC_ACT_ID = s.ENFRC_ACT_ID WHERE EPA_HDLR_ID = ? ", $handlerId))
#if(($sep.get("sep_seq_num")))
            <CME:SupplementalEnvironmentalProject>
#if($sep.get("trans_code"))
                <CME:TransactionCode>$sep.get("trans_code")</CME:TransactionCode>
#end
#if($sep.get("sep_seq_num"))
                <CME:SEPSequenceNumber>$sep.get("sep_seq_num")</CME:SEPSequenceNumber>
#end
#if($sep.get("sep_expnd_amount"))
                <CME:SEPExpenditureAmount>$sep.get("sep_expnd_amount")</CME:SEPExpenditureAmount>
#end
#if($sep.get("sep_schd_comp_date"))
                <CME:SEPScheduledCompletionDate>$sep.get("sep_schd_comp_date")</CME:SEPScheduledCompletionDate>
#end
#if($sep.get("sep_actl_date"))
                <CME:SEPActualDate>$sep.get("sep_actl_date")</CME:SEPActualDate>
#end
#if($sep.get("sep_dflt_date"))
                <CME:SEPDefaultedDate>$sep.get("sep_dflt_date")</CME:SEPDefaultedDate>
#end
#if($sep.get("sep_code_owner"))
                <CME:SEPCodeOwner>$sep.get("sep_code_owner")</CME:SEPCodeOwner>
#end
#if($sep.get("sep_desc_txt"))
                <CME:SEPDescriptionText>$sep.get("sep_desc_txt")</CME:SEPDescriptionText>
#end
#if($sep.get("notes"))
                <CME:Notes>$sep.get("notes")</CME:Notes>
#end
            </CME:SupplementalEnvironmentalProject>
#end
#end
#foreach($media in $helper.getData("SELECT * FROM RCRA_CME_FAC_SUBM fs JOIN RCRA_CME_ENFRC_ACT e ON fs.CME_FAC_SUBM_ID = e.CME_FAC_SUBM_ID JOIN RCRA_CME_MEDIA m ON e.ENFRC_ACT_ID = m.ENFRC_ACT_ID WHERE EPA_HDLR_ID = ? ", $handlerId))
#if(($media.get("multimedia_code_owner"))||($media.get("multimedia_code")))
            <CME:Media>
#if($media.get("trans_code"))
                <CME:TransactionCode>$media.get("trans_code")</CME:TransactionCode>
#end
#if($media.get("multimedia_code_owner"))
                <CME:MultimediaCodeOwner>$media.get("multimedia_code_owner")</CME:MultimediaCodeOwner>
#end
#if($media.get("multimedia_code"))
                <CME:MultimediaCode>$media.get("multimedia_code")</CME:MultimediaCode>
#end
#if($media.get("notes"))
                <CME:Notes>$media.get("notes")</CME:Notes>
#end
            </CME:Media>
#end
#end
    </CME:EnforcementAction>
#end
#end
#foreach($eval in $helper.getData("SELECT * FROM RCRA_CME_FAC_SUBM fs JOIN RCRA_CME_EVAL e ON fs.CME_FAC_SUBM_ID = e.CME_FAC_SUBM_ID WHERE EPA_HDLR_ID = ? ", $handlerId) )
#if(($eval.get("eval_act_loc"))||($eval.get("eval_iden"))||($eval.get("eval_start_date"))||($eval.get("eval_resp_agn")))
    <CME:Evaluation>
#if($eval.get("trans_code"))
        <CME:TransactionCode>$eval.get("trans_code")</CME:TransactionCode>
#end
#if($eval.get("eval_act_loc"))
        <CME:EvaluationActivityLocation>$eval.get("eval_act_loc")</CME:EvaluationActivityLocation>
#end
#if($eval.get("eval_iden"))
        <CME:EvaluationIdentifier>$eval.get("eval_iden")</CME:EvaluationIdentifier>
#end
#if($eval.get("eval_start_date"))
        <CME:EvaluationStartDate>$eval.get("eval_start_date")</CME:EvaluationStartDate>
#end
#if($eval.get("eval_resp_agn"))
        <CME:EvaluationResponsibleAgency>$eval.get("eval_resp_agn")</CME:EvaluationResponsibleAgency>
#end
#if($eval.get("day_zero"))
        <CME:DayZero>$eval.get("day_zero")</CME:DayZero>
#end
#if($eval.get("found_viol"))
        <CME:FoundViolation>$eval.get("found_viol")</CME:FoundViolation>
#end
#if($eval.get("ctzn_cplt_ind"))
        <CME:CitizenComplaintIndicator>$eval.get("ctzn_cplt_ind")</CME:CitizenComplaintIndicator>
#end
#if($eval.get("multimedia_ind"))
        <CME:MultimediaIndicator>$eval.get("multimedia_ind")</CME:MultimediaIndicator>
#end
#if($eval.get("sampl_ind"))
        <CME:SamplingIndicator>$eval.get("sampl_ind")</CME:SamplingIndicator>
#end
#if($eval.get("not_subtl_c_ind"))
        <CME:NotSubtitleCIndicator>$eval.get("not_subtl_c_ind")</CME:NotSubtitleCIndicator>
#end
#if($eval.get("eval_type_owner"))
        <CME:EvaluationTypeOwner>$eval.get("eval_type_owner")</CME:EvaluationTypeOwner>
#end
#if($eval.get("eval_type"))
        <CME:EvaluationType>$eval.get("eval_type")</CME:EvaluationType>
#end
#if($eval.get("focus_area_owner"))
        <CME:FocusAreaOwner>$eval.get("focus_area_owner")</CME:FocusAreaOwner>
#end
#if($eval.get("focus_area"))
        <CME:FocusArea>$eval.get("focus_area")</CME:FocusArea>
#end
#if($eval.get("eval_resp_person_iden_owner"))
        <CME:EvaluationResponsiblePersonIdentifierOwner>$eval.get("eval_resp_person_iden_owner")</CME:EvaluationResponsiblePersonIdentifierOwner>
#end
#if($eval.get("eval_resp_person_iden"))
        <CME:EvaluationResponsiblePersonIdentifier>$eval.get("eval_resp_person_iden")</CME:EvaluationResponsiblePersonIdentifier>
#end
#if($eval.get("eval_resp_suborg_owner"))
        <CME:EvaluationResponsibleSuborganizationOwner>$eval.get("eval_resp_suborg_owner")</CME:EvaluationResponsibleSuborganizationOwner>
#end
#if($eval.get("eval_resp_suborg"))
        <CME:EvaluationResponsibleSuborganization>$eval.get("eval_resp_suborg")</CME:EvaluationResponsibleSuborganization>
#end
#if($eval.get("notes"))
        <CME:Notes>$eval.get("notes")</CME:Notes>
#end
#foreach($request in $helper.getData("SELECT * FROM RCRA_CME_FAC_SUBM fs JOIN RCRA_CME_EVAL e ON fs.CME_FAC_SUBM_ID = e.CME_FAC_SUBM_ID JOIN RCRA_CME_RQST r ON e.EVAL_ID = r.EVAL_ID WHERE EPA_HDLR_ID = ? ", $handlerId))
#if(($request.get("rqst_seq_num")))
            <CME:Request>
#if($request.get("trans_code"))
                <CME:TransactionCode>$request.get("trans_code")</CME:TransactionCode>
#end
#if($request.get("rqst_seq_num"))
                <CME:RequestSequenceNumber>$request.get("rqst_seq_num")</CME:RequestSequenceNumber>
#end
#if($request.get("date_of_rqst"))
                <CME:DateOfRequest>$request.get("date_of_rqst")</CME:DateOfRequest>
#end
#if($request.get("date_resp_rcvd"))
                <CME:DateResponseReceived>$request.get("date_resp_rcvd")</CME:DateResponseReceived>
#end
#if($request.get("rqst_agn"))
                <CME:RequestAgency>$request.get("rqst_agn")</CME:RequestAgency>
#end
#if($request.get("notes"))
                <CME:Notes>$request.get("notes")</CME:Notes>
#end
            </CME:Request>
#end
#end
#foreach($comm in $helper.getData("SELECT * FROM RCRA_CME_FAC_SUBM fs JOIN RCRA_CME_EVAL e ON fs.CME_FAC_SUBM_ID = e.CME_FAC_SUBM_ID JOIN RCRA_CME_EVAL_COMMIT c ON e.EVAL_ID = c.EVAL_ID WHERE EPA_HDLR_ID = ? ", $handlerId))
#if(($comm.get("commit_lead"))||($comm.get("commit_seq_num")))
            <CME:EvaluationCommitment>
#if($comm.get("trans_code"))
                <CME:TransactionCode>$comm.get("trans_code")</CME:TransactionCode>
#end
#if($comm.get("commit_lead"))
                <CME:CommitmentLead>$comm.get("commit_lead")</CME:CommitmentLead>
#end
#if($comm.get("commit_seq_num"))
                <CME:CommitmentSequenceNumber>$comm.get("commit_seq_num")</CME:CommitmentSequenceNumber>
#end
#if($comm.get("notes"))
                <CME:Notes>$comm.get("notes")</CME:Notes>
#end
            </CME:EvaluationCommitment>
#end
#end
#foreach($ev in $helper.getData("SELECT * FROM RCRA_CME_FAC_SUBM fs JOIN RCRA_CME_EVAL e ON fs.CME_FAC_SUBM_ID = e.CME_FAC_SUBM_ID JOIN RCRA_CME_EVAL_VIOL ev ON e.EVAL_ID = ev.EVAL_ID WHERE EPA_HDLR_ID = ? ", $handlerId))
#if(($ev.get("viol_act_loc"))||($ev.get("viol_seq_num"))||($ev.get("agn_which_dtrm_viol")))
            <CME:EvaluationViolation>
#if($ev.get("trans_code"))
                <CME:TransactionCode>$ev.get("trans_code")</CME:TransactionCode>
#end
#if($ev.get("viol_act_loc"))
                <CME:ViolationActivityLocation>$ev.get("viol_act_loc")</CME:ViolationActivityLocation>
#end
#if($ev.get("viol_seq_num"))
                <CME:ViolationSequenceNumber>$ev.get("viol_seq_num")</CME:ViolationSequenceNumber>
#end
#if($ev.get("agn_which_dtrm_viol"))
                <CME:AgencyWhichDeterminedViolation>$ev.get("agn_which_dtrm_viol")</CME:AgencyWhichDeterminedViolation>
#end
            </CME:EvaluationViolation>
#end
#end
    </CME:Evaluation>
#end
#end
#foreach($viol in $helper.getData("SELECT * FROM RCRA_CME_FAC_SUBM fs JOIN RCRA_CME_VIOL v ON fs.CME_FAC_SUBM_ID = v.CME_FAC_SUBM_ID WHERE EPA_HDLR_ID = ? ", $handlerId) )
#if(($viol.get("viol_act_loc"))||($viol.get("viol_seq_num"))||($viol.get("agn_which_dtrm_viol")))
    <CME:Violation>
#if($viol.get("trans_code"))
        <CME:TransactionCode>$viol.get("trans_code")</CME:TransactionCode>
#end
#if($viol.get("viol_act_loc"))
        <CME:ViolationActivityLocation>$viol.get("viol_act_loc")</CME:ViolationActivityLocation>
#end
#if($viol.get("viol_seq_num"))
        <CME:ViolationSequenceNumber>$viol.get("viol_seq_num")</CME:ViolationSequenceNumber>
#end
#if($viol.get("agn_which_dtrm_viol"))
        <CME:AgencyWhichDeterminedViolation>$viol.get("agn_which_dtrm_viol")</CME:AgencyWhichDeterminedViolation>
#end
#if($viol.get("viol_type_owner"))
        <CME:ViolationTypeOwner>$viol.get("viol_type_owner")</CME:ViolationTypeOwner>
#end
#if($viol.get("viol_type"))
        <CME:ViolationType>$viol.get("viol_type")</CME:ViolationType>
#end
#if($viol.get("former_citation_name"))
        <CME:FormerCitationName>$viol.get("former_citation_name")</CME:FormerCitationName>
#end
#if($viol.get("viol_dtrm_date"))
        <CME:ViolationDeterminedDate>$viol.get("viol_dtrm_date")</CME:ViolationDeterminedDate>
#end
#if($viol.get("rtn_compl_actl_date"))
        <CME:ReturnComplianceActualDate>$viol.get("rtn_compl_actl_date")</CME:ReturnComplianceActualDate>
#end
#if($viol.get("rtn_to_compl_qual"))
        <CME:ReturnToComplianceQualifier>$viol.get("rtn_to_compl_qual")</CME:ReturnToComplianceQualifier>
#end
#if($viol.get("viol_resp_agn"))
        <CME:ViolationResponsibleAgency>$viol.get("viol_resp_agn")</CME:ViolationResponsibleAgency>
#end
#if($viol.get("notes"))
        <CME:Notes>$viol.get("notes")</CME:Notes>
#end
#foreach($citation in $helper.getData("SELECT * FROM RCRA_CME_FAC_SUBM fs JOIN RCRA_CME_VIOL v ON fs.CME_FAC_SUBM_ID = v.CME_FAC_SUBM_ID JOIN RCRA_CME_CITATION c ON v.VIOL_ID = c.VIOL_ID WHERE EPA_HDLR_ID = ? ", $handlerId))
#if(($request.get("citation_name_seq_num")))
            <CME:Citation>
#if($citation.get("trans_code"))
                <CME:TransactionCode>$citation.get("trans_code")</CME:TransactionCode>
#end
#if($citation.get("citation_name_seq_num"))
                <CME:CitationNameSequenceNumber>$citation.get("citation_name_seq_num")</CME:CitationNameSequenceNumber>
#end
#if($citation.get("citation_name"))
                <CME:CitationName>$citation.get("citation_name")</CME:CitationName>
#end
#if($citation.get("citation_name_owner"))
                <CME:CitationNameOwner>$citation.get("citation_name_owner")</CME:CitationNameOwner>
#end
#if($citation.get("citation_name_type"))
                <CME:CitationNameType>$citation.get("citation_name_type")</CME:CitationNameType>
#end
#if($citation.get("notes"))
                <CME:Notes>$citation.get("notes")</CME:Notes>
#end
            </CME:Citation>
#end
#end
    </CME:Violation>
#end
#end
#end
</CME:CMEFacilitySubmission>
</CME:HazardousWasteCMESubmission>
#if($makeHeader)#if($makeHeader == "true" || $makeHeader == "TRUE")
</hdr:Payload>
</hdr:Document>
#end#end##if($makeHeader
$helper.print("Template Records: $totalRecCount")
## Setting the total number of records processed
$helper.setResultingRecordCount($totalRecCount)
$helper.print("Total Time:")
$helper.printElapsedTime()
